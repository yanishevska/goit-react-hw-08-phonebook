(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{12:function(e,t,n){e.exports={container:"AppBar_container__2HNez",link:"AppBar_link__1gQxv"}},19:function(e,t,n){e.exports={container:"UserMenu_container__2ND_x",avatar:"UserMenu_avatar__3NKeu",name:"UserMenu_name__340Nb",frame:"UserMenu_frame__tx1Wc",btnList:"UserMenu_btnList__3jvxd",btn12:"UserMenu_btn12__3HI5c"}},20:function(e,t,n){"use strict";var c=n(3),r={getContactsRequest:Object(c.b)("contacts/getContactsRequest"),getContactsSuccess:Object(c.b)("contacts/getContactsSuccess"),getContactsError:Object(c.b)("contacts/getContactsError"),addContactsRequest:Object(c.b)("contacts/addContactsRequest"),addContactsSuccess:Object(c.b)("contacts/addContactsSuccess"),addContactsError:Object(c.b)("contacts/addContactsError"),deleteContactsRequest:Object(c.b)("contacts/ deleteContactsRequest"),deleteContactsSuccess:Object(c.b)("contacts/ deleteContactsSuccess"),deleteContactsError:Object(c.b)("contacts/ deleteContactsError"),changeContact:Object(c.b)("contacts/changeContact")};t.a=r},27:function(e,t,n){e.exports={container:"Container_container__2wnMP",title:"Container_title__2yxEZ",ContainerHeader:"Container_ContainerHeader__1LPbr Container_container__2wnMP"}},47:function(e,t,n){},5:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return x}));var c=n(8),r=n(3),a=n(13),s=n.n(a),o=n(21),i=n(15),u=n.n(i);u.a.defaults.baseURL="https://connections-api.herokuapp.com";var l,b=function(e){u.a.defaults.headers.common.Authorization="Bearer ".concat(e)},j=function(){u.a.defaults.headers.common.Authorization=""},d=Object(r.c)("auth/register",function(){var e=Object(o.a)(s.a.mark((function e(t,n){var c,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,u.a.post("/users/signup",t);case 4:return r=e.sent,a=r.data,b(a.token),e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(1),c(e.t0.data.statusText);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),f=Object(r.c)("auth/login",function(){var e=Object(o.a)(s.a.mark((function e(t,n){var c,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,u.a.post("/users/login",t);case 4:return r=e.sent,a=r.data,b(a.token),e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(1),c(e.t0.data.statusText);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),g=Object(r.c)("auth/logout",function(){var e=Object(o.a)(s.a.mark((function e(t,n){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,u.a.post("/users/logout");case 4:j(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),c(e.t0.data.statusText);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),h=Object(r.c)("auth/refresh",function(){var e=Object(o.a)(s.a.mark((function e(t,n){var c,r,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.getState(),null!==(r=c.auth.token)){e.next=5;break}return console.log("we have not token, back"),e.abrupt("return",n.rejectWithValue());case 5:return b(r),e.prev=6,e.next=9,u.a.get("/users/current");case 9:return a=e.sent,o=a.data,e.abrupt("return",o);case 14:e.prev=14,e.t0=e.catch(6),n.rejectWithValue(e.t0.data.statusText);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,n){return e.apply(this,arguments)}}()),O={register:d,logIn:f,logOut:g,fetchCurrentUser:h},p=Object(r.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1,error:null,isLoading:!1,isNotification:{}},extraReducers:(l={},Object(c.a)(l,O.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoading=!1,e.isLoggedIn=!0,e.isNotification={status:"success",message:"Success registered!"}})),Object(c.a)(l,O.register.rejected,(function(e,t){e.isLoggedIn=!1,e.isNotification={status:"error",message:"Error registered! Try again!"}})),Object(c.a)(l,O.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0,e.isNotification={status:"success",message:"Success authorization!"}})),Object(c.a)(l,O.logIn.rejected,(function(e,t){e.isLoggedIn=!1,e.isNotification={status:"error",message:"Error! Try again!"}})),Object(c.a)(l,O.logOut.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1,e.isNotification={status:"success",message:"Success logout!"}})),Object(c.a)(l,O.fetchCurrentUser.pending,(function(e){e.isFetchingCurrentUser=!0})),Object(c.a)(l,O.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isFetchingCurrentUser=!1})),Object(c.a)(l,O.fetchCurrentUser.rejected,(function(e,t){e.isFetchingCurrentUser=!1,e.error=t.payload})),l)}).reducer,x={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUserName:function(e){return e.auth.user.name},getIsFetchingCurrent:function(e){return e.auth.isFetchingCurrentUser},getIsNotification:function(e){return e.auth.isNotification}}},53:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(17),s=n.n(a),o=n(11),i=(n(47),n(4)),u=(n(53),n(5)),l=n(12),b=n.n(l),j=n(1),d=function(){var e=Object(i.c)(u.c.getIsLoggedIn);return Object(j.jsxs)("nav",{children:[Object(j.jsx)(o.b,{to:"/",className:b.a.link,style:function(e){return{color:e.isActive?" rgba(255, 27, 0, 1)":"black"}},children:"Home"}),e&&Object(j.jsx)(o.b,{to:"/contacts",className:b.a.link,style:function(e){return{color:e.isActive?" rgba(255, 27, 0, 1)":"black"}},children:"Contacts"})]})};function f(){return Object(j.jsxs)("div",{className:b.a.container,children:[Object(j.jsx)(o.b,{to:"/register",className:b.a.link,style:function(e){return{color:e.isActive?" rgba(255, 27, 0, 1)":"black"}},children:"Registration"}),Object(j.jsx)(o.b,{to:"/login",className:b.a.link,style:function(e){return{color:e.isActive?" rgba(255, 27, 0, 1)":"black"}},children:"Login"})]})}var g=n.p+"static/media/default-avatar.ca686d4a.png",h=n(19),O=n.n(h);function p(){var e=Object(i.b)(),t=Object(i.c)(u.c.getUserName),n=g;return Object(j.jsxs)("div",{className:O.a.container,children:[Object(j.jsx)("img",{src:n,alt:"",width:"32",className:O.a.avatar}),Object(j.jsxs)("h3",{className:O.a.name,children:["Welcome",Object(j.jsx)("span",{children:t})]}),Object(j.jsx)("div",{className:"frame",children:Object(j.jsx)("div",{className:O.a.btnList,children:Object(j.jsxs)("button",{type:"button",onClick:function(){return e(u.a.logOut())},className:O.a.btn12,children:[Object(j.jsx)("span",{children:" Log out"}),Object(j.jsx)("span",{children:" Log out"})]})})})]})}var x=function(){var e=Object(i.c)(u.c.getIsLoggedIn);return Object(j.jsxs)("header",{className:b.a.container,children:[Object(j.jsx)(d,{}),e?Object(j.jsx)(p,{}):Object(j.jsx)(f,{})]})},v=n(2);n(74);var m=function(e){var t=e.children,n=e.redirectTo,c=void 0===n?"/login":n;return Object(i.c)(u.c.getIsLoggedIn)?t:Object(j.jsx)(v.a,{to:c})};var C=function(e){var t=e.children,n=e.restricted,c=void 0!==n&&n,r=e.redirectTo,a=void 0===r?"/":r;return Object(i.c)(u.c.getIsLoggedIn)&&c?Object(j.jsx)(v.a,{to:a}):t};function k(){return Object(j.jsx)("div",{className:"text-center",children:Object(j.jsx)("div",{className:"spinner-border text-primary ",size:"l",role:"status",children:Object(j.jsx)("span",{className:"sr-only"})})})}var _=n(27),N=n.n(_);var y=function(e){var t=e.title,n=e.children;return Object(j.jsxs)("div",{className:N.a.ContainerHeader,children:[Object(j.jsx)("h2",{className:N.a.title,children:t}),n]})},I=n(23);n(75);var L=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,105))})),w=Object(c.lazy)((function(){return n.e(7).then(n.bind(null,106))})),U=Object(c.lazy)((function(){return n.e(6).then(n.bind(null,107))})),S=Object(c.lazy)((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,108))}));var E,T=function(){var e=Object(i.b)(),t=Object(i.c)(u.c.getIsFetchingCurrent),n=Object(i.c)(u.c.getIsNotification);return Object(c.useEffect)((function(){var e=n.status,t=n.message;switch(e){case"error":return function(e){return I.b.error("".concat(e))}(t);case"success":return function(e){return I.b.success("".concat(e))}(t);default:return}}),[n]),Object(c.useEffect)((function(){e(u.a.fetchCurrentUser())}),[e]),!t&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(y,{children:Object(j.jsx)(x,{})}),Object(j.jsxs)(c.Suspense,{fallback:Object(j.jsx)(k,{}),children:[Object(j.jsxs)(v.d,{children:[Object(j.jsx)(v.b,{path:"/",element:Object(j.jsx)(C,{children:Object(j.jsx)(L,{})})}),Object(j.jsx)(v.b,{path:"/register",element:Object(j.jsx)(C,{restricted:!0,redirectTo:"/",children:Object(j.jsx)(w,{})})}),Object(j.jsx)(v.b,{path:"/login",element:Object(j.jsx)(C,{restricted:!0,redirectTo:"/contacts",children:Object(j.jsx)(U,{})})}),Object(j.jsx)(v.b,{path:"/contacts",element:Object(j.jsx)(m,{children:Object(j.jsx)(S,{})})})]}),Object(j.jsx)(I.a,{})]})]})},z=n(26),A=n(3),M=n(39),R=n.n(M),F=n(8),W=n(6),q=n(20),H=q.a.getContactsSuccess,V=q.a.addContactsSuccess,B=q.a.deleteContactsSuccess,P=q.a.changeContact,J=Object(A.d)([],(E={},Object(F.a)(E,H,(function(e,t){return t.payload})),Object(F.a)(E,V,(function(e,t){var n=t.payload;return[].concat(Object(z.a)(e),[n])})),Object(F.a)(E,B,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),E)),D=Object(A.d)("",Object(F.a)({},P,(function(e,t){return t.payload}))),K=Object(A.d)(null,{}),Q=Object(W.b)({items:J,filter:D,error:K}),Z=n(14),G=n(40),X=n.n(G),Y=[].concat(Object(z.a)(Object(A.f)({serializableCheck:{ignoredActions:[Z.a,Z.f,Z.b,Z.c,Z.d,Z.e]}})),[R.a]),$={key:"auth",storage:X.a,whitelist:["token"]},ee=Object(A.a)({reducer:{auth:Object(Z.g)($,u.b),contacts:Q},middleware:Y,devTools:!1}),te=Object(Z.h)(ee),ne=n(41);s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(i.a,{store:ee,children:Object(j.jsx)(ne.a,{loading:null,persistor:te,children:Object(j.jsx)(o.a,{children:Object(j.jsx)(T,{})})})})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.1c5f5279.chunk.js.map